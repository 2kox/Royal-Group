<script>
    const cloudName = "dyetbyoy3"; // اسم الحساب في Cloudinary
    const uploadPreset = "Royal Group"; // إعدادات الرفع

    const uploadWidget = cloudinary.createUploadWidget(
        {
            cloudName: cloudName,
            uploadPreset: uploadPreset,
        },
        async (error, result) => {
            if (!error && result && result.event === "success") {
                const imageUrl = result.info.secure_url;
                console.log("رابط الصورة:", imageUrl);

                // إرسال رابط الصورة إلى خادم الخلفية
                await fetch("https://example.com/save-image", { // استبدل بـ عنوان خادمك
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ url: imageUrl, comment: "تعليق الصورة" })
                });

                alert("تم رفع الصورة بنجاح!");
            }
        }
    );

    document.getElementById("upload_widget").addEventListener("click", () => {
        uploadWidget.open();
    });
</script>
